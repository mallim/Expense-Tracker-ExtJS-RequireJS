var lscache=function(){var CACHE_PREFIX="lscache-";var CACHE_SUFFIX="-cacheexpiration";var EXPIRY_RADIX=10;var EXPIRY_UNITS=60*1E3;var MAX_DATE=Math.floor(864E13/EXPIRY_UNITS);var cachedStorage;var cachedJSON;var cacheBucket="";function supportsStorage(){var key="__lscachetest__";var value=key;if(cachedStorage!==undefined)return cachedStorage;try{setItem(key,value);removeItem(key);cachedStorage=true}catch(exc){cachedStorage=false}return cachedStorage}function supportsJSON(){if(cachedJSON===undefined)cachedJSON=
window.JSON!=null;return cachedJSON}function expirationKey(key){return key+CACHE_SUFFIX}function currentTime(){return Math.floor((new Date).getTime()/EXPIRY_UNITS)}function getItem(key){return localStorage.getItem(CACHE_PREFIX+cacheBucket+key)}function setItem(key,value){localStorage.removeItem(CACHE_PREFIX+cacheBucket+key);localStorage.setItem(CACHE_PREFIX+cacheBucket+key,value)}function removeItem(key){localStorage.removeItem(CACHE_PREFIX+cacheBucket+key)}return{set:function(key,value,time){if(!supportsStorage())return;
if(typeof value!=="string"){if(!supportsJSON())return;try{value=JSON.stringify(value)}catch(e){return}}try{setItem(key,value)}catch(e){if(e.name==="QUOTA_EXCEEDED_ERR"||e.name==="NS_ERROR_DOM_QUOTA_REACHED"){var storedKeys=[];var storedKey;for(var i=0;i<localStorage.length;i++){storedKey=localStorage.key(i);if(storedKey.indexOf(CACHE_PREFIX+cacheBucket)===0&&storedKey.indexOf(CACHE_SUFFIX)<0){var mainKey=storedKey.substr((CACHE_PREFIX+cacheBucket).length);var exprKey=expirationKey(mainKey);var expiration=
getItem(exprKey);if(expiration)expiration=parseInt(expiration,EXPIRY_RADIX);else expiration=MAX_DATE;storedKeys.push({key:mainKey,size:(getItem(mainKey)||"").length,expiration:expiration})}}storedKeys.sort(function(a,b){return b.expiration-a.expiration});var targetSize=(value||"").length;while(storedKeys.length&&targetSize>0){storedKey=storedKeys.pop();removeItem(storedKey.key);removeItem(expirationKey(storedKey.key));targetSize-=storedKey.size}try{setItem(key,value)}catch(e){return}}else return}if(time)setItem(expirationKey(key),
(currentTime()+time).toString(EXPIRY_RADIX));else removeItem(expirationKey(key))},get:function(key){if(!supportsStorage())return null;var exprKey=expirationKey(key);var expr=getItem(exprKey);if(expr){var expirationTime=parseInt(expr,EXPIRY_RADIX);if(currentTime()>=expirationTime){removeItem(key);removeItem(exprKey);return null}}var value=getItem(key);if(!value||!supportsJSON())return value;try{return JSON.parse(value)}catch(e){return value}},remove:function(key){if(!supportsStorage())return null;
removeItem(key);removeItem(expirationKey(key))},supported:function(){return supportsStorage()},flush:function(){if(!supportsStorage())return;for(var i=localStorage.length-1;i>=0;--i){var key=localStorage.key(i);if(key.indexOf(CACHE_PREFIX+cacheBucket)===0)localStorage.removeItem(key)}},setBucket:function(bucket){cacheBucket=bucket},resetBucket:function(){cacheBucket=""}}}();